<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magento.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magento.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2006-2015 X.commerce, Inc. (http://www.magento.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>

<div class="box-collateral box-reviews rate-it-cool-product-feedbacks"
      data-gpntype="<?php echo $this->getGpnType(); ?>"
      data-gpnvalue="<?php echo $this->getGpnValue(); ?>"
      data-language="<?php echo Mage::app()->getLocale()->getLocaleCode(); ?>"
      data-count=""
      data-extraParameter="" id="customer-reviews">

  <?php $_items = $this->getReviewsCollection();?>
  <?php foreach($_items as $_review): ?>
    <div itemscope itemtype="http://schema.org/Review">
      <meta itemprop="datePublished" content="<?php echo $_review->getTime(false); ?>"><?php echo $_review->getTime(true); ?>
      <div itemprop="itemReviewed" itemscope itemtype="http://schema.org/Product">
        <span itemprop="name"><?php echo $this->getProduct()->getName(); ?></span>
      </div>
      <span itemprop="reviewRating" itemscope itemtype="http://schema.org/Rating">
        <span itemprop="ratingValue"><?php echo $_review->getStars(); ?></span>
        <?php echo $this->__('Maximum Stars text', '<span itemprop="bestRating">5</span>'); ?>
        <?php echo $this->__('Minimum Stars text', '<span itemprop="worstRating">1</span>'); ?>
      </span>
      <br/>
      <h3><span itemprop="name"><?php echo $_review->getTitle(); ?></span></h3>
      <span itemprop="reviewBody"><?php echo $_review->getContent(); ?></span>

      <div itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="<?php echo Mage::getStoreConfig('general/store_information/name'); ?>">
      </div>
    </div>
    <hr/>
  <?php endforeach; ?>

</div>

<div id="rate-it-cool-product-feedbacks-template" style="display:none;">
  <div class="missingFeedback">
    <div class="rate-it-cool-product-public-feedbackform">
      <h3><?php echo $this->__('First product review for this product'); ?></h3>
      <div id="feedbackform" class="rate-it-cool-feedback-form" style="">
        <form name="productDetailFeedbackform$gpnvalue">
          $feedbackForm
        </form>
      </div>
    </div>
  </div>
  <div class="feedbackElements">
    <div class="overview">
      <h3><?php echo $this->__('Reviews'); ?></h3>
      <table class="feedbackOverview">
        <tr>
          <td class="ratings">
            <div class="rating-box">
              <div class="rating" style="width:100%;"></div>
            </div>
          </td>
          <td class="count">
            <a class="showOnlyStars" data-stars="5" href="#" title="<?php echo $this->__('Show only reviews with 5 stars'); ?>">
              $five
            </a>
          </td>
        </tr>
        <tr>
          <td class="ratings">
            <div class="rating-box">
              <div class="rating" style="width:80%;"></div>
            </div>
          </td>
          <td class="count">
            <a class="showOnlyStars" data-stars="4" href="#" title="<?php echo $this->__('Show only reviews with 4 stars'); ?>">
              $four
            </a>
          </td>
        </tr>
        <tr>
          <td class="ratings">
            <div class="rating-box">
              <div class="rating" style="width:60%;"></div>
            </div>
          </td>
          <td class="count">
            <a class="showOnlyStars" data-stars="3" href="#" title="<?php echo $this->__('Show only reviews with 3 stars'); ?>">
              $three
            </a>
          </td>
        </tr>
        <tr>
          <td class="ratings">
            <div class="rating-box">
              <div class="rating" style="width:40%;"></div>
            </div>
          </td>
          <td class="count">
            <a class="showOnlyStars" data-stars="2" href="#" title="<?php echo $this->__('Show only reviews with 2 stars'); ?>">
              $two
            </a>
          </td>
        </tr>
        <tr>
          <td class="ratings">
            <div class="rating-box">
              <div class="rating" style="width:20%;"></div>
            </div>
          </td>
          <td class="count">
            <a class="showOnlyStars" data-stars="1" href="#" title="<?php echo $this->__('Show only reviews with 1 stars'); ?>">
              $one
            </a>
          </td>
        </tr>
      </table>
      <table class="rate-it-cool-detail-stars" style="$detail.show">
        <thead>
          <tr>
            <th colspan="2"><?php echo $this->__('Detail'); ?> ($details.total / $overview.total)</th>
          </tr>
        </thead>
        <tr style="$details.detail1.display">
          <td>$details.detail1.title</td>
          <td class="ratings">
            <div class="rating-box">
              <div class="rating" style="width:$detail.detail1%;"></div>
            </div>
          </td>
        </tr>
        <tr style="$details.detail2.display">
          <td>$details.detail2.title</td>
          <td class="ratings">
            <div class="rating-box">
              <div class="rating" style="width:$detail.detail2%;"></div>
            </div>
          </td>
        </tr>
        <tr style="$details.detail3.display">
          <td>$details.detail3.title</td>
          <td class="ratings">
            <div class="rating-box">
              <div class="rating" style="width:$detail.detail3%;"></div>
            </div>
          </td>
        </tr>
        <tr style="$details.detail4.display">
          <td>$details.detail4.title</td>
          <td class="ratings">
            <div class="rating-box">
              <div class="rating" style="width:$detail.detail4%;"></div>
            </div>
          </td>
        </tr>
      </table>
      <div class="clearfix"></div>
    </div>
    <div class="rate-it-cool-product-public-feedbackform">
      <div class="rate-it-cool-product-feedbackform">
        <a href="#"
        class="rateit-cool-show-feedbackform-link"
        title="<?php echo $this->__('Write a product review.'); ?>"><?php echo $this->__('Write a product review'); ?></a>
      </div>
      <div id="feedbackform" class="rate-it-cool-feedback-form" style="display:none;">
        <br>
          <form name="productDetailFeedbackform$gpnvalue">
            <input type="hidden" name="gpntype" value="$gpntype"/>
            <input type="hidden" name="gpnvalue" value="$gpnvalue"/>
            <input type="hidden" name="source" value="public"/>
            <input type="hidden" name="language" value="<?php echo Mage::app()->getLocale()->getLocaleCode(); ?>"/>
            <table>
              <tr>
                <td class="label second"><?php echo $this->__('Global'); ?></td>
                <td class="ratings">
                  <span class="reviewStars">
                    <input type="hidden" class="stars" name="stars" value="0"/>
                    <div class="rating-box oneStars" style="width: 13px;float:left;" title="<?php echo Mage::helper('RateItCool_ProductReviews')->__('not really ok'); ?>">
                      <div class="rating rate-it-cool-review-summary-empty rate-it-cool-review-summary"></div>
                    </div>
                    <div class="rating-box twoStars" style="width: 13px;float:left;" title="<?php echo Mage::helper('RateItCool_ProductReviews')->__('hm ok'); ?>">
                      <div class="rating rate-it-cool-review-summary-empty rate-it-cool-review-summary"></div>
                    </div>
                    <div class="rating-box threeStars" style="width: 13px;float:left;" title="<?php echo Mage::helper('RateItCool_ProductReviews')->__('ok'); ?>">
                      <div class="rating rate-it-cool-review-summary-empty rate-it-cool-review-summary"></div>
                    </div>
                    <div class="rating-box fourStars" style="width: 13px;float:left;" title="<?php echo Mage::helper('RateItCool_ProductReviews')->__('cool'); ?>">
                      <div class="rating rate-it-cool-review-summary-empty rate-it-cool-review-summary"></div>
                    </div>
                    <div class="rating-box fiveStars" style="width: 13px;float:left;" title="<?php echo Mage::helper('RateItCool_ProductReviews')->__('coolest'); ?>">
                      <div class="rating rate-it-cool-review-summary-empty rate-it-cool-review-summary"></div>
                    </div>
                  </div>
                  </span>
                </td>
              </tr>
              <tr class="reviewDetail1" style="display:none;">
                <td class="label"></td>
                <td class="ratings">
                  <span class="reviewStars">
                    <input type="hidden" class="stars" name="detail1" value="0"/>
                    <div class="rating-box oneStars" style="width: 13px;float:left;" title="<?php echo Mage::helper('RateItCool_ProductReviews')->__('not really ok'); ?>">
                      <div class="rating rate-it-cool-review-summary-empty rate-it-cool-review-summary"></div>
                    </div>
                    <div class="rating-box twoStars" style="width: 13px;float:left;" title="<?php echo Mage::helper('RateItCool_ProductReviews')->__('hm ok'); ?>">
                      <div class="rating rate-it-cool-review-summary-empty rate-it-cool-review-summary"></div>
                    </div>
                    <div class="rating-box threeStars" style="width: 13px;float:left;" title="<?php echo Mage::helper('RateItCool_ProductReviews')->__('ok'); ?>">
                      <div class="rating rate-it-cool-review-summary-empty rate-it-cool-review-summary"></div>
                    </div>
                    <div class="rating-box fourStars" style="width: 13px;float:left;" title="<?php echo Mage::helper('RateItCool_ProductReviews')->__('cool'); ?>">
                      <div class="rating rate-it-cool-review-summary-empty rate-it-cool-review-summary"></div>
                    </div>
                    <div class="rating-box fiveStars" style="width: 13px;float:left;" title="<?php echo Mage::helper('RateItCool_ProductReviews')->__('coolest'); ?>">
                      <div class="rating rate-it-cool-review-summary-empty rate-it-cool-review-summary"></div>
                    </div>
                  </div>
                  </span>
                </td>
              </tr>
              <tr class="reviewDetail2" style="display:none;">
                <td class="label second"></td>
                <td class="ratings">
                  <span class="reviewStars">
                    <input type="hidden" class="stars" name="detail2" value="0"/>
                    <div class="rating-box oneStars" style="width: 13px;float:left;" title="<?php echo Mage::helper('RateItCool_ProductReviews')->__('not really ok'); ?>">
                      <div class="rating rate-it-cool-review-summary-empty rate-it-cool-review-summary"></div>
                    </div>
                    <div class="rating-box twoStars" style="width: 13px;float:left;" title="<?php echo Mage::helper('RateItCool_ProductReviews')->__('hm ok'); ?>">
                      <div class="rating rate-it-cool-review-summary-empty rate-it-cool-review-summary"></div>
                    </div>
                    <div class="rating-box threeStars" style="width: 13px;float:left;" title="<?php echo Mage::helper('RateItCool_ProductReviews')->__('ok'); ?>">
                      <div class="rating rate-it-cool-review-summary-empty rate-it-cool-review-summary"></div>
                    </div>
                    <div class="rating-box fourStars" style="width: 13px;float:left;" title="<?php echo Mage::helper('RateItCool_ProductReviews')->__('cool'); ?>">
                      <div class="rating rate-it-cool-review-summary-empty rate-it-cool-review-summary"></div>
                    </div>
                    <div class="rating-box fiveStars" style="width: 13px;float:left;" title="<?php echo Mage::helper('RateItCool_ProductReviews')->__('coolest'); ?>">
                      <div class="rating rate-it-cool-review-summary-empty rate-it-cool-review-summary"></div>
                    </div>
                  </div>
                  </span>
                </td>
              </tr>
              <tr class="reviewDetail3" style="display:none;">
                <td class="label"></td>
                <td class="ratings">
                  <span class="reviewStars">
                    <input type="hidden" class="stars" name="detail3" value="0"/>
                    <div class="rating-box oneStars" style="width: 13px;float:left;" title="<?php echo Mage::helper('RateItCool_ProductReviews')->__('not really ok'); ?>">
                      <div class="rating rate-it-cool-review-summary-empty rate-it-cool-review-summary"></div>
                    </div>
                    <div class="rating-box twoStars" style="width: 13px;float:left;" title="<?php echo Mage::helper('RateItCool_ProductReviews')->__('hm ok'); ?>">
                      <div class="rating rate-it-cool-review-summary-empty rate-it-cool-review-summary"></div>
                    </div>
                    <div class="rating-box threeStars" style="width: 13px;float:left;" title="<?php echo Mage::helper('RateItCool_ProductReviews')->__('ok'); ?>">
                      <div class="rating rate-it-cool-review-summary-empty rate-it-cool-review-summary"></div>
                    </div>
                    <div class="rating-box fourStars" style="width: 13px;float:left;" title="<?php echo Mage::helper('RateItCool_ProductReviews')->__('cool'); ?>">
                      <div class="rating rate-it-cool-review-summary-empty rate-it-cool-review-summary"></div>
                    </div>
                    <div class="rating-box fiveStars" style="width: 13px;float:left;" title="<?php echo Mage::helper('RateItCool_ProductReviews')->__('coolest'); ?>">
                      <div class="rating rate-it-cool-review-summary-empty rate-it-cool-review-summary"></div>
                    </div>
                  </div>
                  </span>
                </td>
              </tr>
              <tr class="reviewDetail4" style="display:none;">
                <td class="label second"></td>
                <td class="ratings">
                  <span class="reviewStars">
                    <input type="hidden" class="stars" name="detail4" value="0"/>
                    <div class="rating-box oneStars" style="width: 13px;float:left;" title="<?php echo Mage::helper('RateItCool_ProductReviews')->__('not really ok'); ?>">
                      <div class="rating rate-it-cool-review-summary-empty rate-it-cool-review-summary"></div>
                    </div>
                    <div class="rating-box twoStars" style="width: 13px;float:left;" title="<?php echo Mage::helper('RateItCool_ProductReviews')->__('hm ok'); ?>">
                      <div class="rating rate-it-cool-review-summary-empty rate-it-cool-review-summary"></div>
                    </div>
                    <div class="rating-box threeStars" style="width: 13px;float:left;" title="<?php echo Mage::helper('RateItCool_ProductReviews')->__('ok'); ?>">
                      <div class="rating rate-it-cool-review-summary-empty rate-it-cool-review-summary"></div>
                    </div>
                    <div class="rating-box fourStars" style="width: 13px;float:left;" title="<?php echo Mage::helper('RateItCool_ProductReviews')->__('cool'); ?>">
                      <div class="rating rate-it-cool-review-summary-empty rate-it-cool-review-summary"></div>
                    </div>
                    <div class="rating-box fiveStars" style="width: 13px;float:left;" title="<?php echo Mage::helper('RateItCool_ProductReviews')->__('coolest'); ?>">
                      <div class="rating rate-it-cool-review-summary-empty rate-it-cool-review-summary"></div>
                    </div>
                  </div>
                  </span>
                </td>
              </tr>
            </table>
            <br/>
            <div class="feedback-title">
              <input type="text" name="feedbackTitle" placeholder="<?php echo $this->__('Title of the review');?>" />
            </div>
            <div class="feedback-content">
              <textarea name="feedbackContent" placeholder="<?php echo $this->__('Content of the review');?>"></textarea>
            </div>
            <div class="feedback-recommend">
              <input name="recommend" type="checkbox"> <?php echo $this->__('I recommend the product to a friend'); ?>
            </div>
            <br/>
            <div class="feedback-title">
              <?php echo $this->__('Please fill in the fellowing text'); ?>: <b><?php echo Mage::getStoreConfig('catalog/RateItCool_ProductReviews/security_text'); ?></b>
              <br/>
              <input name="securityText" type="text" placeholder="">
            </div>
            <br/>
            <div class="rateit-cool-send-feedback">
              <a href="#" data-formname="productDetailFeedbackform$gpnvalue" class="button rateit-cool-send-produkt-feedback"><?php echo $this->__('Send the review');?></a>
            </div>
          </form>
          <div class="rateit-cool-send-feedback-success" style="display:none">
            <?php echo $this->__('Thank you for the review'); ?>
          </div>
          <div class="rateit-cool-send-feedback-error" style="display:none">
            <?php echo $this->__("Can't send the review"); ?>
          </div>
      </div>
    </div>
    <div class="recommend">
      <?php echo $this->__('Customer recommended this product'); ?>: $recommend%
      <span style="float:right;">
        <select data-extraParameter="" name="reorderReviews">
          <option value="time;desc"><?php echo $this->__('Show the latest reviews first'); ?></option>
          <option value="time;asc"><?php echo $this->__('Show the oldest reviews first'); ?></option>
          <option value="stars;desc"><?php echo $this->__('Show best reviews first'); ?></option>
          <option value="stars;asc"><?php echo $this->__('Show the worst reviews first'); ?></option>
          <option value="helpful;desc"><?php echo $this->__('Show the best helpful reviews first'); ?></option>
          <option value="helpful;asc"><?php echo $this->__('Show the worst helpful reviews first'); ?></option>
        </select>
      </span>
    </div>
    <dl class="list">
      $list
    </dl>
    <div class="showmoreContainer">
      <div class="showmore" style="display: $showNewtLink;">
        <a href="#" class="showMoreFeedbacks" data-extraParameter="" data-count="$count" data-language="$language" data-gpntype="$gpntype" data-gpnvalue="$gpnvalue"><?php echo $this->__('Show more reviews...'); ?></a>
      </div>
    </div>
  </div>

  <dl class="feedbackElement" style="display:none;">
    <dt>
      <div class="ratings">
        <div class="rating-box">
          <div class="rating" style="width:$review.stars%;"></div>
        </div>
      </div>
      <span class="date">$review.time</span>
      <h3>$review.title</h3>
      <span class="rate-it-cool-verified" style="$review.verified_source"><?php echo Mage::helper('RateItCool_ProductReviews')->__('verified'); ?></span>
      <span class="rate-it-cool-public" style="$review.public_source"><?php echo Mage::helper('RateItCool_ProductReviews')->__('public'); ?></span>
      <span class="rate-it-cool-mobile" style="$review.mobile_source"><?php echo Mage::helper('RateItCool_ProductReviews')->__('mobile'); ?></span>
    </dt>
    <dd>
      $review.content
      <div class="helpful">
        <?php echo $this->__('Is the review helpful for you?'); ?>
          <span class="positive" data-positive="$review.positive" data-language="$review.language" data-gpntype="$review.gpntype" data-gpnvalue="$review.gpnvalue" data-feedbackid="$review.id">
            <?php echo $this->__('Yes'); ?> (<span class="positiveValue">$review.positive</span>)
          </span> |
          <span class="negative" data-negative="$review.negative"  data-language="$review.language" data-gpntype="$review.gpntype" data-gpnvalue="$review.gpnvalue" data-feedbackid="$review.id">
            <?php echo $this->__('No'); ?> (<span class="negativeValue">$review.negative</span>)
          </span>
      </p>
      <p class="incorrect">
        <?php echo $this->__('Feedback %s report %s','<span class="report" data-language="$review.language" data-gpntype="$review.gpntype" data-gpnvalue="$review.gpnvalue" data-feedbackid="$review.id">','</span>'); ?>
      </p>

    </dd>
  </dl>

</div>
